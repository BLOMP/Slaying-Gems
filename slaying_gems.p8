pico-8 cartridge // http://www.pico-8.com
version 27
__lua__

#include consts.lua
#include general.lua
#include states.lua
#include collision.lua
#include player.lua
#include board.lua


function reset()
  ticks = 0
  board.init()
  player = m_player(64, 64)
  player:set_anim("walk")
end

function _init()
  reset()
end

function _update60()
  ticks += 1
  player:update()
  board:update()
end

function _draw()
  cls()
  map(0,0)
  board.draw()
  player:draw()

  print(DEBUG, 50, 122)
  rect2(DEBUGX, DEBUGY, 0,0,7)
  --print(player.dx, 0, 10)
  print(stat(7) .. " fps", 1, 122)
end


__gfx__
000000005555555501499f7dd7f99410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550000002dd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700555555550000002dd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000555555550000002dd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000555555550000002dd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700555555550000002dd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550000002dd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000555555550000002dd2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777777bbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000007700000770770007707700007700000000000000777000077000000007700007700000000000000000000000000000000000000000000000000770
00000000077770000770770007707700077777007700077007707700077000000077000000770000077007700077000000000000000000000000000000007700
00000000077770000770770077777770770000007700770000777000770000000770000000077000007777000077000000000000000000000000000000077000
00000000007700000000000007707700077770000007700007770770000000000770000000077000777777777777770000000000777777000000000000770000
00000000007700000000000077777770000077000077000077077700000000000770000000077000007777000077000000000000000000000000000007700000
00000000000000000000000007707700777770000770077077007700000000000077000000770000077007700077000000770000000000000077000077000000
00000000007700000000000007707700007700007700077007770770000000000007700007700000000000000000000000770000000000000077000070000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007700000000000000000000000000000
07777700007700000777700007777000000777007777770000777000777777000777700007777000000000000000000000077000000000000770000007777000
77000770077700007700770077007700007777007700000007700000770077007700770077007700007700000077000000770000000000000077000077007700
77007770007700000000770000007700077077007777700077000000000077007700770077007700007700000077000007700000777777000007700000007700
77077770007700000077700000777000770077000000770077777000000770000777700007777700000000000000000077000000000000000000770000077000
77770770007700000770000000007700777777700000770077007700007700007700770000007700000000000000000007700000000000000007700000770000
77700770007700007700770077007700000077007700770077007700007700007700770000077000007700000077000000770000777777000077000000000000
07777700777777007777770007777000000777700777700007777000007700000777700007770000007700000077000000077000000000000770000000770000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000770000000000000000000000000000000000000
07777700007700007777770000777700777770007777777077777770007777007700770007777000000777707770077077770000770007707700077000777000
77000770077770000770077007700770077077000770007007700070077007707700770000770000000077000770077007700000777077707770077007707700
77077770770077000770077077000000077007700770700007707000770000007700770000770000000077000770770007700000777777707777077077000770
77077770770077000777770077000000077007700777700007777000770000007777770000770000000077000777700007700000777777707707777077000770
77077770777777000770077077000000077007700770700007707000770077707700770000770000770077000770770007700070770707707700777077000770
77000000770077000770077007700770077077000770007007700000077007707700770000770000770077000770077007700770770007707700077007707700
07777000770077007777770000777700777770007777777077770000007777707700770007777000077770007770077077777770770007707700077000777000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
77777700077770007777770007777000777777007700770077007700770007707700077077007700777777700777700077000000077770000007000000000000
07700770770077000770077077007700707707007700770077007700770007707700077077007700770007700770000007700000000770000077700000000000
07700770770077000770077077700000007700007700770077007700770007700770770077007700700077000770000000770000000770000770770000000000
07777700770077000777770007770000007700007700770077007700770707700077700007777000000770000770000000077000000770007700077000000000
07700000770777000770770000077700007700007700770077007700777777700077700000770000007700700770000000007700000770000000000000000000
07700000077770000770077077007700007700007700770007777000777077700770770000770000077007700770000000000770000770000000000000000000
77770000000777007770077007777000077770000777700000770000770007707700077007777000777777700777700000000070077770000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077777777
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00866660008666600086660000866660008666600000000000000000000000000000000000000000000000000000000000000000000000000000000000866660
00655500006555000065566000655500006555000000000000000000000000000000000000000000000000000000000000000000000000000000000000655500
0056c1c00056c1c0005665000056c1c00056c1c0000000000000000000000000000000000000000000000000000000000000000000000000000000000056c1c0
00566160005661600056c1c000566160005661600000000000000000000000000000000000000000000000000000000000000000000000000000000000566160
00058500000585000005850000058500000585000000000000000000000000000000000000000000000000000000000000000000000000000000000009f58500
0075650000756500000565000765650000756500000000000000000000000000000000000000000000000000000000000000000000000000000000000f956570
00000600000600000007070000606000000606000000000000000000000000000000000000000000000000000000000000000000000000000000000000060600
00077000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007c7000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ccc000000cc77000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0cc00000000cc7000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1c00000000ccc0000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2100000011cc0000010c770001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000002100000002ccc70021ccc700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000100000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000210000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000021000000001100000011100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0010000011c0000000000c000000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21cc000000ccc00000000c060000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1cccc00000ccc77000000cc00000c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000cc700000cc7000000076000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000c00000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000111000010110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01100000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01111010010001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111000000011100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000001100001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01110000001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11111000011110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00111100000220000033330000444400000110000000000055555555000000000000000000000000000000000000000000000000000000000000000000000000
017ccd1000278200037bbb30047777400017e1000000000055555555000000000000000000000000000000000000000000000000000000000000000000000000
177ddcc10278882003b7313049faaf940177ee100000000055555555000000000000000000000000000000000000000000000000000000000000000000000000
1cdfcdc102e8882003b731304fa77af4177f9ee10005500055555555000000000000000000000000000000000000000000000000000000000000000000000000
1cdccdc102e8882003b7313049ffff941eed12210005500055555555000000000000000000000000000000000000000000000000000000000000000000000000
1dcddcd102e8882003b7313004aaaa4001ee22100000000055555555000000000000000000000000000000000000000000000000000000000000000000000000
01cccc10002e82000371113000499400001e21000000000055555555000000000000000000000000000000000000000000000000000000000000000000000000
00111100000220000033330000044000000110000000000055555555000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001010101010101000000000000000000
__map__
c0c0c0c0c0c0c0c0c0c1c0c0c0c0c1c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c1c0c0c0c0c0c0c0c0c0c0c0c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c0c100000000000000000000c1c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c0c000000000000000000000c0c1c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c1c000000000000000000000c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c00000000000000000000000c0c1c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0000000c000c10000c00000c0c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c00000c0000000c1000000c000c0c1c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c00000000000000000000000c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c1c0c00002f5f5f5f5f5f50300c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c0c00002f5f5f5f5f5f50300c0c0c100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c1c00002f5f5f5f5f5f50300c0c1c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c0c00002f5f5f5f5f5f50300c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c1c0c10002f5f5f5f5f5f50300c1c1c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c1c00002f5f5f5f5f5f50300c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c1c0c0c0c0c0c0c0c1c0c0c1c0c1c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c0c0c0c0c0c0c1c0c0c1c0c0c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c1c0c1c0c0c1c0c0c1c0c1c0c1c1c1c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
c0c0c0c1c1c0c0c1c0c0c1c0c1c0c0c000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
